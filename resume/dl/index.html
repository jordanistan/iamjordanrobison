<!doctype html>
<html>
<head>
  <title>Download File</title>
</head>
<body>
  <a href="https://github.com/jordanistan/iamjordanrobison/blob/master/resume/dl/jordan_robison_Cloud_enginer_Resume.pdf" download>
    <img src="download-resume.png" alt="Image">
  </a>
  <h1>To Download my Resume File</h1>
  <p>Please Enter your email and company to download the file:</p>
  <form id="download-form">
    <label for="email">Email:</label><br>
    <input type="email" id="email" name="email"><br>
    <label for="company">Company:</label><br>
    <input type="text" id="company" name="company"><br><br>
    <button type="submit">Download</button>
  </form> 
  <script>
    // Get the form element
    var form = document.getElementById('download-form');

    // Add an event listener to the form's submit event
    form.addEventListener('submit', function(event) {
      // Prevent the form from submitting
      event.preventDefault();

      // Get the email and company input elements
      var emailInput = document.getElementById('email');
      var companyInput = document.getElementById('company');

      // Get the entered email and company
      var email = emailInput.value;
      var company = companyInput.value;

      // Validate the email and company
      if (email.trim().length == 0) {
        alert('Please enter a valid email');
      } else if (company.trim().length == 0) {
        alert('Please enter a valid company');
      } else {
        // If the email and company are valid, send a POST request to the serverless function
        fetch('https://my-serverless-function.com/write-to-file', {
          method: 'POST',
          body: JSON.stringify({
            email: email,
            company: company
          })
        })
        .then(function(response) {
          if (response.ok) {
            // If the request was successful, create a link to the file and click it to start the download
            var link = document.createElement('a');
            link.href = 'https://github.com/jordanistan/iamjordanrobison/blob/master/resume/dl/jordan_robison_Cloud_enginer_Resume.pdf';
            link.download = 'jordan_robison_Cloud_enginer_Resume.pdf';
            link.click();
          } else {
            // If the request was unsuccessful, show an error message
            alert('An error occurred while trying to write to the file');
          }
        })
      }
    });
  </script>
</body>
</html>
